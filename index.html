<!DOCTYPE html>
<html>
<head>
  <title>Max the Mojo Magician</title>
  <style>
    body { margin: 0; font-family: sans-serif; display: flex; height: 100vh; }
    #chat { width: 40%; border-right: 1px solid #ccc; padding: 1rem; overflow: auto; }
    #results { width: 60%; padding: 1rem; overflow: auto; }
    .result { border: 1px solid #ddd; margin-bottom: 1rem; padding: 1rem; border-radius: 8px; }
  </style>
</head>
<body>
  <div id="chat">
    <!-- CBB Webchat Embed -->
    <script src="https://app.chatgptbuilder.io/webchat/plugin.js?v=6"></script>
    <script>
      ktt10.setup({
        id: "h201F03x4e4lBQI0",
        accountId: "1349554",
        color: "#710725"
      });
    </script>
  </div>

  <div id="results">
    <h1>Results for: <span id="search-term"></span></h1>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const searchTerm = params.get("q")?.toLowerCase();
    document.getElementById("search-term").textContent = searchTerm || "None";

    fetch('./results.json')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("results");
        const matches = data.filter(row => row.term.toLowerCase().includes(searchTerm));
        if (!matches.length) {
          container.innerHTML += "<p>No results found.</p>";
          return;
        }

        matches.forEach(item => {
          const div = document.createElement("div");
          div.className = "result";
          div.innerHTML = `
            <div><strong>${item.course}</strong> â€“ ${item.module}</div>
            <div>Timestamp: ${item.timestamp}</div>
            <a href="${item.link}" target="_blank">Go to Lesson</a>
          `;
          container.appendChild(div);
        });
      });
  </script>
</body>
</html>


